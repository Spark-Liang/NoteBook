### Armstrong 公理系统

推理规则：

- 自反律

- 增广律

- 传递率

- 合并规则

- 伪传递率

- 分解规律

#### 闭包

关系 R 中所有能够推理出的<font color='red'>函数依赖的集合。</font>表示为$F^+$

#### 求候选码

找出能够推导出所有属性的属性集合。<font color='red'>注意不能存在该属性集合的子集也能够推出所有属性。</font>

### 模式分解

#### 无损分解判断

##### 定义：通过自然连接所有的子关系，能够恢复到原来的关系的分解

##### 判断无损连接分解的算法

关键依据：存在函数依赖 X→Y，并且有两个或更多的子关系的属性集包含 X ，那么这些子关系中的 X 如果相等，那么这些子关系对应的 Y 也会相等。

##### 步骤：

1. 建立一张表，每一列对应一个属性记为 Aj，每一行对应一个子关系，记为Ri。如果 Aj 在 Rj 中，则该单元格记为 aj，否则记为 bij。
2. 该表中的 “a” 实际上表示，在以该行的子关系作为主表进行关联时，能够通过函数依赖推导出该属性的值。所以每个单元格可以通过两种方式或者 “a”，一个是子关系直接包含的属性，另一个是通过函数依赖推导出的属性。
3. 使用每个函数依赖更新该表，如果存在两个子关系包含依赖左侧所有的属性，并且对应的属性都相等，则把这两个子关系中在这个函数依赖右侧的属性更新成相同。更新的标准是如果任意子关系包含"aj"，则更新为"aj"，否则更新为 bij，其中i取较小值。
4. 当子关系只有两个时，可以直接采用公式$U_1 \cap U_2 → U_1 - U_2 \in F^+ 或者 U_1 \cap U_2 → U_2 - U_1 \in F^+$

#### 函数依赖保持

<b>定义：所有子关系的依赖的并集与原关系的最小函数依赖等价。</b>

<b><font color='red'>通过反复使用保证无损连接性，又保证函数依赖的分解，能够保证分解之后至少能够达到3NF。</font></b>

### 水平分解，垂直分解

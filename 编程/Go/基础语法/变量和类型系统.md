### 变量和类型系统

- 变量使用

- 常量使用

- 类型系统

#### 变量使用

##### 语法规则

- 函数内的局部变量声明了必须使用，函数外的全局变量可以声明了不使用。

##### 变量语法

##### 变量声明语法

```go
// 只声明类型
var a int
// 声明类型和初始值
var a int = 0
// 声明多个变量,
var a,b int = 0,1
// 声明变量并自动类型推断
a, b := 0,1
// 这种因式分解关键字的写法一般用于声明全局变量
var (
    vname1 v_type1
    vname2 v_type2
)
```

变量初始化值：

- 数字为0

- 布尔为false

- 字符串为 `""`

- 其他为`nil`

###### 变量赋值语法

示例：

```go
// 同时赋值多个
a, b, c = 5, 7, "abc"
```

###### 特殊变量

- `_`：go 中只读不写的变量。对个变量赋值相当于抛弃这个值
  
  ```go
  _, error := doSomething()
  ```

- 

##### 值类型和指针类型

在golang中，非指针类型的赋值都是复制，指针类型的赋值都是传递地址。

- 值类型赋值新变量后，对新变量的修改不会影响旧变量。指针类型则会修改

- **这个与java不同，对于引用类型，java只提供传递地址的方式，没有提供复制的方式。**

例子：

```go
// 值传递
b := a
// 地址传递
b := &a
var b *int = &a
```

对指针变量值操作的示例：

```go
a := 1 
b := &a
*b = *b + 1
fmt.Println(a,b,*b) // 2 地址 2
```

#### 常量使用

定义常量的示例：[Go 语言常量 | 菜鸟教程](https://www.runoob.com/go/go-constants.html)

#### 类型系统

##### 常用类型

###### 基本类型简介

- golang中的基础类型可以参考`reflect\value.go`中的定义的`Kind`，所有golang中通过type语句定义的类型都是Kind的实例。

- 每种类型都有对应的零值，指针值。

###### golang基本类型

- 基本数据类型：（golang中不可拆分的数据存储类型）
  
  - 布尔类型：bool
  
  - 数字类型：int8~64、uint8~64、float32、float64、complex64（32位虚数）、complex128（64位虚数）
  
  - 字符串类型：string

- 派生类型（除了基本数据类型外的基础类型）
  
  - 结构体（由多个字段组合而成的数据结构）
    
    - 结构体相等的条件是所有字段的值都相等
    
    - 结构体的值复制是把结构体内所有字段复制到新的实体内
  
  - 数组（长度**确定**的数据项序列）
    
    - golang的数组最大的特点是**长度不同的数组属于不同的类型，并且声明数据类型时长度必须是确定的。**
  
  - 切片（长度可变的数据项序列）
    
    - **类型签名和数组的区别是，假设元素类型为T，n个元素的数组为`[n]T`，切片为`[]T`**
    
    - 数组的零值是一个内部所有元素均为零值的数组，切片的零值是`nil`
  
  - Map类型（键值对集合）
  
  - 指针（存放指定类型数据的地址）
  
  - 接口类型（用于定义某个类型对象具有的方法集合）

###### golang基本类型特性表

| 特性                                   | 基本数据类型                            | 结构体                          | 数组                    | 切片              | Map                         | 指针  | 管道  | 接口  | 函数  |
| ------------------------------------ | --------------------------------- | ---------------------------- | --------------------- | --------------- | --------------------------- | --- | --- | --- | --- |
| **零值**                               | bool为false<br>数字是0<br>string为`""` | 所有字段均为零值                     | 所有元素均为零值              | nil             | nil                         | nil | nil | nil | nil |
| **强制类型转换**（假设字段为 i ，类型为 T）,语法为`T(i)` | 只能转换为基本数据类型，编译器会自动检查是否支持转换。       | 只能与结构体互转，条件是字段数量、名称、顺序、类型都相同 | 只能与数组互转，条件是元素类型和长度都相同 | 只能与切片互转，条件是类型相同 | 只能与Map互转，条件是key value的类型都相同 | 不支持 |     |     |     |
| 支持range语法                            | string支持                          | N                            | Y                     | Y               | Y                           | N   | Y   |     |     |
| 支持 len或者cap                          | string只支持len                      |                              | Y                     | Y               | Y                           |     |     |     |     |

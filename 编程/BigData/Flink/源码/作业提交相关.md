[TOC]

## 计算逻辑提交

flink的计算逻辑传递流程是：

```
程序对各种flink算子的编排（List<Transformation<?>>） => StreamGraph ==> JobGraph ==> ExecutionGraph ==> 物理执行图
```

相关文档：

- [Flink系列之Flink中四层Graph详解](https://blog.csdn.net/luoyepiaoxue2014/article/details/128080218)

## Sql提交

1. 构建TableEnvironment
2. 调用 `executeSql(statement)` 方法提交sql执行。
   1. executeSql中会调用 `org.apache.flink.table.delegation.Parser#parse` 接口方法将sql解析成具体的操作
   2. 最终调用 executeInternal 方法，将操作实例（Operation的子类）进行不同情况的执行
      - 对于元数据相关的操作通常是直接操作 CatalogManager
      - 查询操作会调用 executeQueryOperation 方法，将QueryOperation包装为对客户端进行写入的操作（ CollectModifyOperation）
      - 最终查询或者写入操作都会调用 `org.apache.flink.table.delegation.Planner#translate` 接口方法转换为`List<Transformation<?>>`
   3. 解析出的 `List<Transformation<?>>` 会转换为 StreamGraph 提交到后端


## Jar包提交
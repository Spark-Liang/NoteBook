#### 哈希算法

- 哈希碰撞概率计算
  
  - 公式
  
  - 公式应用
  
  - 公式推导

- 常用哈希算法
  
  - MD5
  
  - SHA256

##### 哈希碰撞概率计算

###### 公式

$p(n,d) \approx 1- e^{\frac{-n(n-1)}{2d}}$<br>  

- **n**: 哈希前的能够取值的数量

- d：hash后所有可能取值的数量

- p(n,d)：发生碰撞的概率

###### 公式应用

2. $p(n,d) \approx 1- e^{\frac{-n(n-1)}{2d}}$ ：计算哈希碰撞概率

3. $d = \frac{-n(n-1)}{2 \dot ln[1 - p(n,d)]}$：计算在指定哈希碰撞概率下，所需的hash取值的数量。$length=\log_{d^’}(d)$，其中length代表 hash key 的长度，d' 代表每位允许的取值可能，一般是2（二进制），字母加数字（10+26\*2=62）。

###### 公式推导

**生日问题**<br>

1. $p^‘(n)=1 * (1- \frac{1}{d}) * (1- \frac{2}{d}) ...(1- \frac{n-1}{d}))$，n表示hash前的取值数量，d表示hash后能够取值的总数量

2. 简化后，$p^’(n)=\frac{d!}{d^n*(d-n)!}$

3. 由于该公式不容易计算，采用 $e^x \approx 1+x$近似代替，因为当 n 比较小的时候$\frac{n-1}{d}$，替代的等式成立。

4. 替换后公式为$p^‘(n) \approx 1 * e^{-\frac{1}{d}} * e^{-\frac{2}{d}} ... e^{-\frac{n-1}{d}}$

5. 由于指数是等差数列求和，$p^’(n) \approx e^{-\frac{\frac{n(n-1)}{2}}{d}} \approx e^{-\frac{n(n-1)}{2d}}$

6. 所以发生碰撞的概率是 $1-p^‘(n)$

##### 常用的hash算法

###### MD5

- d：$2^{128}$，生成128为二进制hash值

###### SHA256

- d：
